<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>WebJam 2025</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>

  <body>
    <h1>Color Matching!</h1>
    <p class="bold-paragraph">
      You must <b id="bold">match</b> the two cards of the same color to win the
      game!
    </p>

    <button class="red" id="red1" type="button">Click Me!</button>
    <button class="red" id="red2" type="button">Click Me!</button>
    <button class="orange" id="orange1" type="button">Click Me!</button>
    <button class="orange" id="orange2" type="button">Click Me!</button>
    <button class="yellow" id="yellow1" type="button">Click Me!</button>
    <button class="yellow" id="yellow2" type="button">Click Me!</button>
    <button class="yellow" id="green1" type="button">Click Me!</button>
    <button class="yellow" id="green2" type="button">Click Me!</button>
    <button class="yellow" id="blue1" type="button">Click Me!</button>
    <button class="yellow" id="blue2" type="button">Click Me!</button>
    <button class="yellow" id="purple1" type="button">Click Me!</button>
    <button class="yellow" id="purple2" type="button">Click Me!</button>

    <div class="message" id="matchFailed"></div>
    <div class="message" id="matchedRed"></div>
    <div class="message" id="matchedOrange"></div>
    <div class="message" id="matchedYellow"></div>
    <div class="message" id="matchedGreen"></div>
    <div class="message" id="matchedBlue"></div>
    <div class="message" id="matchedPurple"></div>

    <script>
      const colors = [
        "red",
        "red",
        "orange",
        "orange",
        "yellow",
        "yellow",
        "green",
        "green",
        "blue",
        "blue",
        "purple",
        "purple",
      ];
      let lastClickedColor = null;

      // randomly shuffles the button colors
      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      // wait for HTML to load
      window.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll(
          "#red1, #red2, #orange1, #orange2, #yellow1, #yellow2, #green1, #green2, #blue1, #blue2, #purple1, #purple2"
        );

        const shuffledColors = [...colors];
        shuffle(shuffledColors);

        buttons.forEach((btn, index) => {
          const color = shuffledColors[index];
          btn.classList.remove(
            "red",
            "orange",
            "yellow",
            "green",
            "blue",
            "purple"
          );
          btn.classList.add(color);
          btn.onclick = () => handleClick(color);

          setTimeout(() => {
            btn.style.backgroundColor = "grey";
          }, 4000);
        });
      });

      function handleClick(color) {
        if (lastClickedColor === null) {
          lastClickedColor = color; // first click
        } else {
          if (lastClickedColor === color) {
            document.getElementById(
              `matched${capitalize(color)}`
            ).innerText = `You matched ${color}!`;
          } else {
            document.getElementById("matchFailed").innerText =
              "Not a match! Game over :(";
            document.getElementById("matchedRed").innerText = "";
            document.getElementById("matchedOrange").innerText = "";
            document.getElementById("matchedYellow").innerText = "";
            document.getElementById("matchedGreen").innerText = "";
            document.getElementById("matchedBlue").innerText = "";
            document.getElementById("matchedPurple").innerText = "";
          }
          lastClickedColor = null;
        }
      }

      function capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }
    </script>
  </body>
</html>
